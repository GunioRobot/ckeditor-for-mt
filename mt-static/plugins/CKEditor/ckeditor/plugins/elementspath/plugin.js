(function(){var a={toolbarFocus:{editorFocus:false,exec:function(c){var d=c._.elementsPath.idBase,e=CKEDITOR.document.getById(d+'0');e&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air);}}},b='<span class="cke_empty">&nbsp;</span>';CKEDITOR.plugins.add('elementspath',{requires:['selection'],init:function(c){var d='cke_path_'+c.name,e,f=function(){if(!e)e=CKEDITOR.document.getById(d);return e;},g='cke_elementspath_'+CKEDITOR.tools.getNextNumber()+'_';c._.elementsPath={idBase:g,filters:[]};c.on('themeSpace',function(k){if(k.data.space=='bottom')k.data.html+='<span id="'+d+'_label" class="cke_voice_label">'+c.lang.elementsPath.eleLabel+'</span>'+'<div id="'+d+'" class="cke_path" role="group" aria-labelledby="'+d+'_label">'+b+'</div>';});function h(k){c.focus();var l=c._.elementsPath.list[k];if(l.is('body')){var m=new CKEDITOR.dom.range(c.document);m.selectNodeContents(l);m.select();}else c.getSelection().selectElement(l);};var i=CKEDITOR.tools.addFunction(h),j=CKEDITOR.tools.addFunction(function(k,l){var m=c._.elementsPath.idBase,n;l=new CKEDITOR.dom.event(l);var o=c.lang.dir=='rtl';switch(l.getKeystroke()){case o?39:37:case 9:n=CKEDITOR.document.getById(m+(k+1));if(!n)n=CKEDITOR.document.getById(m+'0');n.focus();return false;case o?37:39:case CKEDITOR.SHIFT+9:n=CKEDITOR.document.getById(m+(k-1));if(!n)n=CKEDITOR.document.getById(m+(c._.elementsPath.list.length-1));n.focus();return false;case 27:c.focus();return false;case 13:case 32:h(k);return false;}return true;});c.on('selectionChange',function(k){var l=CKEDITOR.env,m=k.data.selection,n=m.getStartElement(),o=[],p=k.editor,q=p._.elementsPath.list=[],r=p._.elementsPath.filters;while(n){var s=0;for(var t=0;t<r.length;t++){if(r[t](n)===false){s=1;break;}}if(!s){var u=q.push(n)-1,v;if(n.data('cke-real-element-type'))v=n.data('cke-real-element-type');else v=n.getName();var w='';if(l.opera||l.gecko&&l.mac)w+=' onkeypress="return false;"';if(l.gecko)w+=' onblur="this.style.cssText = this.style.cssText;"';var x=p.lang.elementsPath.eleTitle.replace(/%1/,v);o.unshift('<a id="',g,u,'" href="javascript:void(\'',v,'\')" tabindex="-1" title="',x,'"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900?' onfocus="event.preventBubble();"':'')+' hidefocus="true" '+' onkeydown="return CKEDITOR.tools.callFunction(',j,',',u,', event );"'+w,' onclick="CKEDITOR.tools.callFunction('+i,',',u,'); return false;"',' role="button" aria-labelledby="'+g+u+'_label">',v,'<span id="',g,u,'_label" class="cke_label">'+x+'</span>','</a>');}if(v=='body')break;
n=n.getParent();}var y=f();y.setHtml(o.join('')+b);p.fire('elementsPathUpdate',{space:y});});c.on('contentDomUnload',function(){e&&e.setHtml(b);});c.addCommand('elementsPathFocus',a.toolbarFocus);}});})();
